{"mappings":"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","sources":["public/js/index.js","public/js/map.js","public/js/stripe.js","public/js/alert.js","public/js/login.js","public/js/review.js","public/js/signup.js","public/js/updateSetting.js"],"sourcesContent":["// Example imports (adjust based on your project)\r\nimport './map';\r\nimport './stripe';\r\nimport './alert';\r\nimport './login';\r\nimport './review';\r\nimport './signup';\r\nimport './updateSetting';\r\n","const displayMap = (locations) => {\r\n  const map = L.map('map', {\r\n    scrollWheelZoom: true,\r\n    minZoom: 5,\r\n    maxZoom: 5,\r\n  });\r\n\r\n  // Base tiles\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    attribution:\r\n      '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n  }).addTo(map);\r\n\r\n  const points = [];\r\n\r\n  // Add markers\r\n  locations.forEach((loc, i) => {\r\n    const [lng, lat] = loc.coordinates; // Make sure your data matches [lng, lat] order\r\n    points.push([lat, lng]);\r\n    L.marker([lat, lng])\r\n      .addTo(map)\r\n      .bindPopup(`<p>Day ${i + 1}: ${loc.description}</p>`, { autoClose: false });\r\n  });\r\n\r\n  // Fit to points\r\n  map.fitBounds(points, { padding: [60, 60] });\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const mapEl = document.getElementById('map');\r\n  if (mapEl) {\r\n    const locations = JSON.parse(mapEl.dataset.locations);\r\n    displayMap(locations);\r\n  }\r\n});\r\n","// stripe.js\r\n\r\n// Initialize Stripe with your publishable key\r\nconst stripe = Stripe(\r\n  'pk_test_51RxPZtGlxWdSMEL0bt6GYWC2eQugKHrG6Htsyuq1SNZ1hKMJgx9kVBqtOjuRyPeUqEd52P9OkWQfQs202VNDwv5D00eAABrUiC'\r\n);\r\n\r\n// Booking function\r\nexport const bookTour = async (tourId) => {\r\n  try {\r\n    // Get checkout session from API\r\n    const session = await axios.get(`/api/v1/bookings/checkout-session/${tourId}`);\r\n\r\n    // console.log('Stripe session:', session.data.session);\r\n\r\n    // Redirect to checkout\r\n    await stripe.redirectToCheckout({\r\n      sessionId: session.data.session.id,\r\n    });\r\n  } catch (err) {\r\n    console.error(err.response ? err.response.data : err);\r\n  }\r\n};\r\n\r\n// Attach event listener\r\nconst bookBtn = document.getElementById('book-tour');\r\nif (bookBtn) {\r\n  bookBtn.addEventListener('click', (e) => {\r\n    e.target.textContent = 'Processing...';\r\n    const tourId = e.target.dataset.tourId;\r\n    bookTour(tourId);\r\n  });\r\n}\r\n","/* eslint-disable */\r\n\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\n// type is 'success' or 'error'\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n","/* eslint-disable */\r\n// Itâ€™s a JavaScript HTTP client used to make requests to the backend.\r\nimport axios from 'axios';\r\n\r\nimport { showAlert } from './alert.js';\r\n\r\n// =======================\r\n// Login function\r\n// =======================\r\nconst login = async (email, password) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: '/api/v1/users/login',\r\n      data: { email, password },\r\n      withCredentials: true, // Allow cookies\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Logged in successfully!');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response?.data?.message || 'Login failed');\r\n  }\r\n};\r\n\r\n// =======================\r\n// Logout function\r\n// =======================\r\nconst logout = async () => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'GET',\r\n      url: '/api/v1/users/logout',\r\n      withCredentials: true,\r\n    });\r\n    if (res.data.status === 'success') location.reload(true);\r\n  } catch (err) {\r\n    console.error('Logout error details:', err); // ðŸ‘ˆ add this\r\n    showAlert('error', 'Error logging out! Try again.');\r\n  }\r\n};\r\n\r\n// =======================\r\n// DOM Event Listeners\r\n// =======================\r\nconst loginForm = document.querySelector('.form--login');\r\nconst logOutBtn = document.querySelector('.nav__el--logout');\r\n\r\nif (loginForm) {\r\n  loginForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    login(email, password);\r\n  });\r\n}\r\n\r\nif (logOutBtn) {\r\n  logOutBtn.addEventListener('click', logout);\r\n}\r\n","// public/js/review.js\r\nimport axios from 'axios';\r\n\r\nimport { showAlert } from './alert.js';\r\n\r\nexport const createReview = async (tourId, review, rating) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: `/api/v1/tours/${tourId}/reviews`,\r\n      data: { review, rating },\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Review submitted successfully!');\r\n      window.setTimeout(() => {\r\n        location.reload(); // reload to show new review\r\n      }, 1000);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n};\r\n\r\n// public/js/index.js\r\n\r\nconst reviewForm = document.querySelector('.form--review');\r\n\r\nif (reviewForm) {\r\n  reviewForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const review = document.getElementById('review').value;\r\n    const rating = document.getElementById('rating').value;\r\n    const tourId = reviewForm.action.split('/').at(-2); // extract tourId\r\n    createReview(tourId, review, rating);\r\n  });\r\n}\r\n","/* eslint-disable */\r\nimport axios from 'axios';\r\n\r\nimport { showAlert } from './alert.js';\r\n\r\nconst signup = async (name, email, password, passwordConfirm, photo) => {\r\n  try {\r\n    const form = new FormData();\r\n    form.append('name', name);\r\n    form.append('email', email);\r\n    form.append('password', password);\r\n    form.append('passwordConfirm', passwordConfirm);\r\n    if (photo) form.append('photo', photo);\r\n\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: '/api/v1/users/signup',\r\n      data: form,\r\n      withCredentials: true,\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Account created successfully!');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response?.data?.message || 'Signup failed');\r\n  }\r\n};\r\n\r\nconst signupForm = document.querySelector('.form--signup');\r\n\r\nif (signupForm) {\r\n  signupForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const name = document.getElementById('name').value;\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById('passwordConfirm').value;\r\n    const photo = document.getElementById('photo').files[0];\r\n\r\n    signup(name, email, password, passwordConfirm, photo);\r\n  });\r\n}\r\n","/* eslint-disable */\r\nimport axios from 'axios';\r\n\r\nimport { showAlert } from './alert.js';\r\n\r\n// Update user data or password\r\nexport const updateSettings = async (data, type) => {\r\n  try {\r\n    const url = type === 'password' ? '/api/v1/users/updateMyPassword' : '/api/v1/users/updateMe';\r\n\r\n    const res = await axios({\r\n      method: 'PATCH',\r\n      url,\r\n      data,\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', `${type === 'password' ? 'Password' : 'Data'} updated successfully!`);\r\n      window.setTimeout(() => {\r\n        location.reload();\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response?.data?.message || err.message || 'Something went wrong!');\r\n  }\r\n};\r\n\r\n// PROFILE UPDATE FORM (name, email, photo)\r\nconst userDataForm = document.querySelector('.form-user-data');\r\n\r\nif (userDataForm) {\r\n  const nameInput = document.getElementById('name');\r\n  const emailInput = document.getElementById('email');\r\n  const photoInput = document.getElementById('photo');\r\n\r\n  userDataForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n\r\n    // Create FormData object for sending text + file\r\n    const form = new FormData();\r\n    form.append('name', nameInput.value);\r\n    form.append('email', emailInput.value);\r\n    if (photoInput.files.length > 0) {\r\n      form.append('photo', photoInput.files[0]);\r\n    }\r\n    // console.log(form);\r\n\r\n    // Call your API update function\r\n    updateSettings(form, 'data');\r\n  });\r\n}\r\n\r\n// PASSWORD UPDATE FORM\r\nconst userPasswordForm = document.querySelector('.form-user-password');\r\nif (userPasswordForm) {\r\n  const currentPassword = document.getElementById('password-current');\r\n  const newPassword = document.getElementById('password');\r\n  const confirmPassword = document.getElementById('password-confirm');\r\n\r\n  userPasswordForm.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n\r\n    const passwordBtn = document.querySelector('.btn--save-password');\r\n    passwordBtn.textContent = 'Updating...';\r\n\r\n    await updateSettings(\r\n      {\r\n        passwordCurrent: currentPassword.value,\r\n        password: newPassword.value,\r\n        passwordConfirm: confirmPassword.value,\r\n      },\r\n      'password'\r\n    );\r\n\r\n    passwordBtn.textContent = 'Save password';\r\n    currentPassword.value = '';\r\n    newPassword.value = '';\r\n    confirmPassword.value = '';\r\n  });\r\n}\r\n"],"names":[],"version":3,"file":"app.js.map","sourceRoot":"/"}